<?xml version="1.0" encoding="UTF-8"?>
<page-structure>
  <metadata>
    <name>Persona Room Page</name>
    <route>/room/:personaId?</route>
    <component>PersonaRoomView.vue</component>
    <description>Persona's personal room with profile display, actions, and quest system</description>
  </metadata>

  <design-principles>
    <principle source="kickofflabs.com">
      <name>Color Palette Limitation</name>
      <compliance>Yes</compliance>
      <details>Uses 1-2 colors: indigo/purple for primary actions, green for success states</details>
    </principle>
    <principle source="kickofflabs.com">
      <name>Single Font Family</name>
      <compliance>Yes</compliance>
      <details>Uses Inter font family throughout</details>
    </principle>
    <principle source="kickofflabs.com">
      <name>4px Grid System</name>
      <compliance>Yes</compliance>
      <details>All spacing uses CSS variables based on 4px increments</details>
    </principle>
    <principle source="kickofflabs.com">
      <name>Consistent Padding</name>
      <compliance>Yes</compliance>
      <details>All cards use var(--card-padding), sections use var(--section-spacing)</details>
    </principle>
  </design-principles>

  <color-palette>
    <primary-cta>
      <color>indigo-500 to purple-600 gradient</color>
      <usage>Primary action buttons (Start Conversation)</usage>
    </primary-cta>
    <secondary-cta>
      <color>purple/accent</color>
      <usage>Secondary actions (Share Profile)</usage>
    </secondary-cta>
    <success>
      <color>green-400, green-500/20 background</color>
      <usage>Completed quests, success messages</usage>
    </success>
    <background>
      <color>akashic gradient</color>
      <usage>Page background</usage>
    </background>
  </color-palette>

  <typography>
    <font-family>Inter, system-ui, sans-serif</font-family>
    <variations>
      <variation>
        <name>Page Title</name>
        <weight>bold (700)</weight>
        <size>text-3xl (30px)</size>
        <effect>text-gradient</effect>
      </variation>
      <variation>
        <name>Section Headings</name>
        <weight>semibold (600)</weight>
        <size>text-xl (20px)</size>
      </variation>
    </variations>
  </typography>

  <spacing-system>
    <base-unit>4px</base-unit>
    <tokens>
      <token name="--container-padding" value="24px" multiplier="6" />
      <token name="--section-spacing" value="48px" multiplier="12" />
      <token name="--card-padding" value="24px" multiplier="6" />
      <token name="--card-spacing" value="16px" multiplier="4" />
      <token name="--element-spacing" value="16px" multiplier="4" />
      <token name="--tight-spacing" value="8px" multiplier="2" />
      <token name="--micro-spacing" value="4px" multiplier="1" />
    </tokens>
  </spacing-system>

  <layout-structure>
    <container>
      <padding>var(--container-padding)</padding>
      <spacing>var(--section-spacing)</spacing>
      
      <header>
        <breadcrumb>
          <nav>Dashboard ‚Üí {persona.name}'s Room</nav>
          <spacing>var(--text-spacing)</spacing>
        </breadcrumb>
        
        <title-section>
          <layout>flex items-center justify-between</layout>
          <title>{persona.name}'s Room</title>
          <size>text-3xl</size>
          <effect>text-gradient</effect>
          <description>Interact with your AI persona and complete quests</description>
          <button type="ghost" size="sm" text="Back" />
        </title-section>
      </header>
      
      <main>
        <layout>grid lg:grid-cols-3</layout>
        <gap>var(--card-spacing)</gap>
        
        <section id="persona-display" span="lg:col-span-2">
          <card>
            <padding>var(--card-padding)</padding>
            <component>PersonaCard (full size)</component>
            
            <status-indicator>
              <spacing-top>var(--element-spacing)</spacing-top>
              <padding-top>var(--element-spacing)</padding-top>
              <border>border-t border-slate-700</border>
              <layout>flex items-center justify-between</layout>
              <indicator>Green dot (animate-pulse) + "Ready to chat"</indicator>
              <timestamp>Last interaction time</timestamp>
            </status-indicator>
          </card>
        </section>
        
        <aside id="actions-quests">
          <spacing>var(--card-spacing)</spacing>
          
          <section id="actions">
            <card>
              <padding>var(--card-padding)</padding>
              <title>Interact with {persona.name}</title>
              <spacing-bottom>var(--element-spacing)</spacing-bottom>
              
              <actions>
                <spacing>var(--tight-spacing)</spacing>
                <button type="primary" width="w-full" text="Start Conversation" />
                <button type="secondary" width="w-full" text="Share Profile" />
              </actions>
              
              <feedback-message conditional="share action">
                <type>success or error</type>
                <auto-dismiss>3 seconds for success</auto-dismiss>
              </feedback-message>
            </card>
          </section>
          
          <section id="quests">
            <card>
              <padding>var(--card-padding)</padding>
              <header>
                <title>First Steps</title>
                <progress>{completedQuests}/{totalQuests} completed</progress>
              </header>
              
              <quest-list>
                <spacing>var(--tight-spacing)</spacing>
                <quest-item>
                  <padding>var(--tight-spacing)</padding>
                  <border>border (green if completed, slate if not)</border>
                  <background>green-500/10 if completed, slate-800/50 if not</background>
                  <title>{quest.title}</title>
                  <description>{quest.description}</description>
                  <reward>üéÅ {amount} {type}</reward>
                  <action>
                    <button type="ghost" size="sm" text="Complete" conditional="not completed" />
                    <text text="Completed" conditional="completed" />
                  </action>
                </quest-item>
              </quest-list>
              
              <empty-state conditional="all quests completed">
                <icon>üéØ</icon>
                <text>All quests completed!</text>
              </empty-state>
            </card>
          </section>
        </aside>
      </main>
    </container>
  </layout-structure>

  <components>
    <component name="Button" usage="Actions and quest completion">
      <variants>primary, secondary, ghost</variants>
      <sizes>sm, md</sizes>
      <width-options>w-full</width-options>
    </component>
    <component name="PersonaCard" usage="Display persona profile">
      <size>full</size>
    </component>
    <component name="LoadingSkeleton" usage="Loading states">
      <types>header, persona, card</types>
    </component>
  </components>

  <states>
    <state type="loading">
      <display>LoadingSkeleton components</display>
      <aria>role="status" aria-live="polite"</aria>
    </state>
    <state type="error">
      <display>Error card with retry button</display>
      <aria>role="alert" aria-live="assertive"</aria>
    </state>
    <state type="ready">
      <display>Full room content</display>
    </state>
  </states>

  <accessibility>
    <aria-labels>All interactive elements have descriptive labels</aria-labels>
    <semantic-html>Uses header, main, section, aside, nav elements</semantic-html>
    <focus-states>Quest items have focus states for keyboard navigation</focus-states>
    <screen-reader>sr-only class for descriptive text</screen-reader>
  </accessibility>

  <responsive-design>
    <breakpoints>
      <mobile>Default</mobile>
      <desktop>lg: (1024px+)</desktop>
    </breakpoints>
    <adaptations>
      <adaptation>Main grid: single column on mobile, 3 columns on desktop (2 for persona, 1 for sidebar)</adaptation>
      <adaptation>Header: stacks vertically on mobile</adaptation>
    </adaptations>
  </responsive-design>
</page-structure>

